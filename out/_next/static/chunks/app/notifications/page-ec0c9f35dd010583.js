(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{6185:function(e,t,a){Promise.resolve().then(a.bind(a,6327))},6327:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(1441),l=a(9951),o=a(2173),d=a(4033),i=a(2265),n=a(5925);t.default=function(){let[e,t]=(0,i.useState)([]),[a,c]=(0,i.useState)(1),[x,m]=(0,i.useState)(""),[g,h]=(0,i.useState)(""),[u,b]=(0,i.useState)(""),[p,f]=(0,i.useState)(0),[k,y]=(0,i.useState)(!1),j=(0,d.useRouter)();(0,i.useEffect)(()=>{let e=localStorage.getItem("token");e?o.Z.get(l.Z+"/admin/protected",{headers:{"x-access-token":e}}).then(e=>{200!==e.status&&(localStorage.removeItem("token"),j.push("/login"))}).catch(()=>{localStorage.removeItem("token"),j.push("/login")}):j.push("/login")},[]),(0,i.useEffect)(()=>{let e=localStorage.getItem("token");e?o.Z.get(l.Z+"/admin/notifications?page=1&limit=10",{headers:{"x-access-token":e}}).then(e=>{t(e.data.data),c(e.data.currentPage),f(e.data.totalPages)}).catch(e=>{console.log(e)}):j.push("/login")},[j,k]),(0,i.useEffect)(()=>{let e=localStorage.getItem("token");o.Z.get(l.Z+"/admin/notifications?page="+a+"&perPage=10",{headers:{"x-access-token":e}}).then(e=>{t(e.data.data),c(e.data.currentPage),f(e.data.totalPages),0===e.data.data.length&&c(a-1)}).catch(e=>{console.log(e)})},[a]);let N=a=>{let r=localStorage.getItem("token");o.Z.delete(l.Z+"/admin/delete-notification/"+a,{headers:{"x-access-token":r}}).then(r=>{t(e.filter(e=>e._id!==a))}).catch(e=>{console.log(e)})},w=e=>{c(Math.max(1,Math.min(e,p)))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mx-auto",children:"Notification"}),(0,r.jsxs)("div",{className:"max-w-sm mx-auto mt-14",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name"}),(0,r.jsx)("input",{onChange:e=>h(e.target.value),type:"name",id:"name",value:g,"aria-describedby":"helper-text-explanation",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@flowbite.com"})]}),(0,r.jsxs)("div",{className:"max-w-sm mx-auto",children:[(0,r.jsx)("label",{htmlFor:"href",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Href"}),(0,r.jsx)("input",{onChange:e=>b(e.target.value),type:"url",id:"href",value:u,"aria-describedby":"helper-text-explanation",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"https://example.com"})]}),(0,r.jsxs)("div",{className:"max-w-sm mx-auto my-5",children:[(0,r.jsx)("label",{className:"mb-[10px] block text-base font-medium text-dark dark:text-white",children:"Upload Image"}),(0,r.jsx)("input",{type:"file",onChange:e=>{m(e.target.files[0])},className:"w-full cursor-pointer rounded-md border border-stroke dark:border-dark-3 text-dark-6 outline-none transition file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke dark:file:border-dark-3 file:bg-gray-2 dark:file:bg-dark-2 file:py-3 file:px-5 file:text-body-color dark:file:text-dark-6 file:hover:bg-primary file:hover:bg-opacity-10 focus:border-primary active:border-primary disabled:cursor-default disabled:bg-gray-2"})]}),(0,r.jsx)("div",{className:"max-w-sm mx-auto my-5",children:(0,r.jsx)("button",{onClick:()=>{let e=new FormData;e.append("title",g),e.append("url",u),e.append("image",x),o.Z.post("".concat(l.Z,"/admin/sent-notification"),e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(e=>{(200===e.status||201===e.status)&&(y(!k),n.ZP.success("Notification added successfully"),h(""),b(""),m(""))}).catch(e=>{console.log(e)})},className:"bg-primary text-white w-full py-3 rounded-lg bg-blue-500",children:"Add"})})]}),(0,r.jsx)("h1",{className:"text-3xl font-bold my-5",children:"Notification"}),(0,r.jsxs)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[(0,r.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Image"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"url"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Delete"})]})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("img",{className:"w-[100px] h-[100px]",src:e.image,alt:""})}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.title}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.url}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:()=>N(e._id),children:"Delete"})})]})}))})]}),(0,r.jsx)("div",{})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center mt-5",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Page",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:a})," ","of"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:p})," ","Total Page"]}),(0,r.jsxs)("div",{className:"inline-flex mt-2 xs:mt-0",children:[(0,r.jsxs)("button",{onClick:()=>w(a-1),className:"flex items-center justify-center px-4 h-10 text-base font-medium text-white bg-gray-800 rounded-s hover:bg-gray-900 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5 me-2 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5H1m0 0 4 4M1 5l4-4"})}),"Prev"]}),(0,r.jsxs)("button",{className:"flex items-center justify-center px-4 h-10 text-base font-medium text-white bg-gray-800 border-0 border-s border-gray-700 rounded-e hover:bg-gray-900 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>w(a+1),children:["Next",(0,r.jsx)("svg",{className:"w-3.5 h-3.5 ms-2 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 5h12m0 0L9 1m4 4L9 9"})})]})]})]})]})})}}},function(e){e.O(0,[750,396,139,971,938,744],function(){return e(e.s=6185)}),_N_E=e.O()}]);